{"version":3,"sources":["../../dist/index.js","App.js","index.js"],"names":["Object","defineProperty","exports","value","ex","React","__webpack_require__","React__default","LocationContext","createContext","isFetching","default","_a","_b","lazy","_c","watch","_d","options","children","fetchLocation","opts","setIsFetching","navigator","geolocation","getCurrentPosition","handlePosition","handleError","_e","useState","_f","position","setPosition","_g","error","setError","pos","err","code","message","useEffect","id_1","watchPosition","clearWatch","store","createElement","Provider","App","react_default","a","href","dist_default","Test","Component","_useContext","useContext","_ref","coords","latitude","longitude","altitude","JSON","stringify","onClick","ReactDOM","render","App_App","document","getElementById"],"mappings":"wFAEAA,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAOA,IAJAC,EAIAC,EAAYC,EAAQ,GAEpBC,GANAH,EAMAC,IALA,kBAAAD,GAAA,YAAAA,IAAA,QAAAA,EAOAI,EAAAH,EAAAI,cAAA,CACAC,YAAA,IA0EAR,EAAAM,kBACAN,EAAAS,QAxEA,SAAAC,GACA,IAAAC,EAAAD,EAAAE,KACAA,OAAA,IAAAD,KACAE,EAAAH,EAAAI,MACAA,OAAA,IAAAD,KACAE,EAAAL,EAAAM,QACAA,OAAA,IAAAD,EAAA,GAAkCA,EAClCE,EAAAP,EAAAO,SAEA,SAAAC,EAAAC,GACAC,GAAA,GACAC,UAAAC,YAAAC,mBAAAC,EAAAC,EAAAN,GAAAH,GAGA,IAAAU,EAAAvB,EAAAwB,UAAA,GACAnB,EAAAkB,EAAA,GACAN,EAAAM,EAAA,GAEAE,EAAAzB,EAAAwB,SAAA,IACAE,EAAAD,EAAA,GACAE,EAAAF,EAAA,GAEAG,EAAA5B,EAAAwB,UAAA,GACAK,EAAAD,EAAA,GACAE,EAAAF,EAAA,GASA,SAAAP,EAAAU,GACAd,GAAA,GACAU,EAAAI,GAGA,SAAAT,EAAAU,GACAF,EAAAE,GAbA,gBAAAd,WACAY,EAAA,CACAG,KAAA,GACAC,QAAA,8BAcAlC,EAAAmC,UAAA,WACA1B,IACAQ,GAAA,GACAF,EAAAF,KAEG,IAEHb,EAAAmC,UAAA,WACA,GAAAxB,EAAA,CACA,IAAAyB,EAAAlB,UAAAC,YAAAkB,cAAAhB,EAAAC,EAAAT,GACA,kBACAK,UAAAC,YAAAmB,WAAAF,MAKG,IACH,IAAAG,EAAA,CACAV,QACAxB,aACAqB,WACAX,iBAEA,OAAAb,EAAAsC,cAAArC,EAAAsC,SAAA,CACA3C,MAAAyC,GACGzB,gKCjFkB4B,mLAEjB,OACEC,EAAAC,EAAAJ,cAAA,WACEG,EAAAC,EAAAJ,cAAA,iBAAQG,EAAAC,EAAAJ,cAAA,KAAGK,KAAK,4CAAR,QAAR,aACQF,EAAAC,EAAAJ,cAAA,KAAGK,KAAK,2EAAR,SACRF,EAAAC,EAAAJ,cAACM,EAAAF,EAAD,CAAkBnC,MAAM,EAAME,OAAO,GACrCgC,EAAAC,EAAAJ,cAACO,EAAD,eAPyBC,aAcjC,SAASD,IAAO,IAAAE,EAMVC,qBAAW/C,mBAJb0B,EAFYoB,EAEZpB,MACAxB,EAHY4C,EAGZ5C,WACAqB,EAJYuB,EAIZvB,SACAX,EALYkC,EAKZlC,cALYoC,EAS0BzB,IAAaA,EAAS0B,QAAU,IAAjEC,EATOF,EASPE,SAAUC,EATHH,EASGG,UAAWC,EATdJ,EAScI,SAC5B,OACEZ,EAAAC,EAAAJ,cAAA,WACEG,EAAAC,EAAAJ,cAAA,wBAAgBa,GAChBV,EAAAC,EAAAJ,cAAA,WACAG,EAAAC,EAAAJ,cAAA,yBAAiBc,GACjBX,EAAAC,EAAAJ,cAAA,WACAG,EAAAC,EAAAJ,cAAA,wBAAgBe,GAChBZ,EAAAC,EAAAJ,cAAA,WACAG,EAAAC,EAAAJ,cAAA,0BAAkBgB,KAAKC,UAAUpD,IACjCsC,EAAAC,EAAAJ,cAAA,WACAG,EAAAC,EAAAJ,cAAA,WAAMgB,KAAKC,UAAU5B,IACrBc,EAAAC,EAAAJ,cAAA,WACAG,EAAAC,EAAAJ,cAAA,UAAQkB,QAAS3C,GAAjB,aCnCN4C,IAASC,OAAOjB,EAAAC,EAAAJ,cAACqB,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.f3904aec.chunk.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar React = require('react');\n\nvar React__default = _interopDefault(React);\n\nvar LocationContext = React.createContext({\n  isFetching: false\n});\n\nvar LocationProvider = function LocationProvider(_a) {\n  var _b = _a.lazy,\n      lazy = _b === void 0 ? true : _b,\n      _c = _a.watch,\n      watch = _c === void 0 ? false : _c,\n      _d = _a.options,\n      options = _d === void 0 ? {} : _d,\n      children = _a.children;\n\n  function fetchLocation(opts) {\n    setIsFetching(true);\n    navigator.geolocation.getCurrentPosition(handlePosition, handleError, opts || options);\n  }\n\n  var _e = React.useState(false),\n      isFetching = _e[0],\n      setIsFetching = _e[1];\n\n  var _f = React.useState({}),\n      position = _f[0],\n      setPosition = _f[1];\n\n  var _g = React.useState(false),\n      error = _g[0],\n      setError = _g[1];\n\n  if (!(\"geolocation\" in navigator)) {\n    setError({\n      code: 99,\n      message: \"Geolocation not available\"\n    });\n  }\n\n  function handlePosition(pos) {\n    setIsFetching(false);\n    setPosition(pos);\n  }\n\n  function handleError(err) {\n    setError(err);\n  } // at init only\n\n\n  React.useEffect(function () {\n    if (!lazy) {\n      setIsFetching(true);\n      fetchLocation(options);\n    }\n  }, []); // at init only\n\n  React.useEffect(function () {\n    if (watch) {\n      var id_1 = navigator.geolocation.watchPosition(handlePosition, handleError, options);\n      return function () {\n        navigator.geolocation.clearWatch(id_1);\n      };\n    }\n\n    return;\n  }, []);\n  var store = {\n    error: error,\n    isFetching: isFetching,\n    position: position,\n    fetchLocation: fetchLocation\n  };\n  return React__default.createElement(LocationContext.Provider, {\n    value: store\n  }, children);\n};\n\nexports.LocationContext = LocationContext;\nexports.default = LocationProvider;","import React, { Component, useContext } from 'react'\n\n// import LocationProvider, {LocationContext} from 'react-geoloc/dist/index.js';\nimport LocationProvider, {LocationContext} from 'react-geoloc/dist/index.js';\n\nexport default class App extends Component {\n  render () {\n    return (\n      <div>\n        <p>Code <a href=\"https://github.com/saadtazi/react-geoloc\">here</a>.\n        Example <a href=\"https://github.com/saadtazi/react-geoloc/blob/master/example/src/App.js\">here</a></p>\n        <LocationProvider lazy={true} watch={false}>\n        <Test/>\n        </LocationProvider>\n      </div>\n    )\n  }\n}\n\nfunction Test() {\n  const {\n    error,\n    isFetching,\n    position,\n    fetchLocation\n  } = useContext(LocationContext);\n  // useEffect(() => { fetchLocation()}, [])\n  // fetchLocation();\n  const {latitude, longitude, altitude} = position && (position.coords || {});\n  return (\n    <div>\n      <pre>latitude: {latitude}</pre>\n      <hr/>\n      <pre>longitude: {longitude}</pre>\n      <hr/>\n      <pre>altitude: {altitude}</pre>\n      <hr/>\n      <pre>isFetching: {JSON.stringify(isFetching)}</pre>\n      <hr/>\n      <pre>{JSON.stringify(error)}</pre>\n      <hr/>\n      <button onClick={fetchLocation}>Find me!</button>\n      </div>\n  );\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}